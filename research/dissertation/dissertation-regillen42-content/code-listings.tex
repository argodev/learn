\chapter{Code Listings}

\begin{Spacing}{1}
\lstset{basicstyle=\ttfamily\small,commentstyle=\color{red}}
\begin{lstlisting}[language=matlab,numbers=left,stepnumber=5,numberfirstline=false,firstnumber=1,caption={A Very Old MATLAB Function},label={lst:myfft}]
function [X,f]=myfft(x,t)
% myfft - An FFT function with usable output
%
% Usage: [X,f] = myfft(x,t)
%
% Where:     x is some time-domain signal
%            t is the time axis for x
%
%  Note: t must be an evenly-spaced vector
%        f is in units of Hz (multiply by 2pi to get rad/s)
n_points=2^(floor(log(length(x))/log(2)));
fftX=2*fft(x,n_points)/length(t);
fftX(1)=[];
dt=t(2)-t(1);
maxfreq=1/(2*dt);
nyquist = 1/2;
f = (1:n_points/2)/(n_points/2)*nyquist/dt;
X = fftX(1:n_points/2);
\end{lstlisting}
\end{Spacing}
